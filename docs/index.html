<!DOCTYPE html>
<html lang="en">
  <head>
    <title>BJNClientSDK  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset="utf-8">
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>


    <a title="BJNClientSDK  Reference"></a>

    <header class="header">
      <div>
        <img src="img/bjnlogo.png" style="height: 2.0em">
      </div>
      <p class="header-col header-col--primary">
        <a class="header-link" href="index.html">
          BlueJeans iOS SDK Documentation
        </a>
        
      </p>
    
      <p class="header-col--secondary">
        <form role="search" action="search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </p>
    
    
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="index.html">iOS Video SDK</a>
      <img class="carat" src="img/carat.png" />
      <span id="currentPage">BJNClientSDK  Reference</span>
      <script>
        if (window.location.pathname.endsWith("index.html")) {
          document.getElementById("currentPage").innerHTML = "About the SDK"
          document.title = "BlueJeans IOS SDK"
        }
      </script>
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Documentation.html">Documentation</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="contentshareguide.html">ContentShareGuide</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="changelog.html">CHANGELOG</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="BlueJeansSDK.html">BlueJeansSDK</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/BlueJeansSDK.html">BlueJeansSDK</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="MeetingService.html">MeetingService</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/MeetingServiceProtocol.html">MeetingServiceProtocol</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/MeetingJoinResult.html">MeetingJoinResult</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/VideoState.html">VideoState</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/VideoStateInactiveReason.html">VideoStateInactiveReason</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/MeetingState.html">MeetingState</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/VideoLayout.html">VideoLayout</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/LeaveMeetingError.html">LeaveMeetingError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/MeetingInformation.html">MeetingInformation</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/WaitingRoomEvent.html">WaitingRoomEvent</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="PermissionService.html">PermissionService</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/PermissionServiceProtocol.html">PermissionServiceProtocol</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/Permission.html">Permission</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/PermissionStatus.html">PermissionStatus</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="VideoDeviceService.html">VideoDeviceService</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/VideoDeviceServiceProtocol.html">VideoDeviceServiceProtocol</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/CameraDevice.html">CameraDevice</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="AudioDeviceService.html">AudioDeviceService</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/AudioDeviceServiceProtocol.html">AudioDeviceServiceProtocol</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="LoggingService.html">LoggingService</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/LoggingServiceProtocol.html">LoggingServiceProtocol</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/LoggingMode.html">LoggingMode</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/LogUploadResult.html">LogUploadResult</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="LoggingService.html#/s:12BJNClientSDK26LogUploadCompletionHandlera">LogUploadCompletionHandler</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Chat.html">Chat</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/PublicChatServiceProtocol.html">PublicChatServiceProtocol</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/PrivateChatServiceProtocol.html">PrivateChatServiceProtocol</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/BJNChatMessage.html">BJNChatMessage</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/BJNPrivateChatMessage.html">BJNPrivateChatMessage</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/BJNParticipant.html">BJNParticipant</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Chat.html#/s:12BJNClientSDK13ParticipantIDa">ParticipantID</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="ContentShareService.html">ContentShareService</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/ContentShareServiceProtocol.html">ContentShareServiceProtocol</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="ContentShareService.html#/s:12BJNClientSDK27ContentShareMessageProvidera">ContentShareMessageProvider</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="ContentShareService.html#/s:12BJNClientSDK30ContentShareParametersProtocola">ContentShareParametersProtocol</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="ContentShareService.html#/s:12BJNClientSDK24ContentShareAvailabilitya">ContentShareAvailability</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="ContentShareService.html#/s:12BJNClientSDK26ContentShareExtensionStatea">ContentShareExtensionState</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="ContentShareService.html#/s:12BJNClientSDK22ContentShareStopReasona">ContentShareStopReason</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/BJNContentShareParameters.html">BJNContentShareParameters</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="ModeratorWaitingRoomService.html">ModeratorWaitingRoomService</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/ModeratorWaitingRoomServiceProtocol.html">ModeratorWaitingRoomServiceProtocol</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/WaitingRoomParticipant.html">WaitingRoomParticipant</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="ModeratorControlsService.html">ModeratorControlsService</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/ModeratorControlsServiceProtocol.html">ModeratorControlsServiceProtocol</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/RecordingState.html">RecordingState</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/RecordingSuccess.html">RecordingSuccess</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/RecordingError.html">RecordingError</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="ClosedCaptioningService.html">ClosedCaptioningService</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/ClosedCaptioningServiceProtocol.html">ClosedCaptioningServiceProtocol</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Utility.html">Utility</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/BJNObservable.html">BJNObservable</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/BJNMutableObservable.html">BJNMutableObservable</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Utility.html#/s:12BJNClientSDK10CallbackIda">CallbackId</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Utility.html#/s:12BJNClientSDK15CompletionBlocka">CompletionBlock</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content">
            
            <p><a href="https://www.bluejeans.com" title="BlueJeans iOS Client Software Development Kit"><img src="https://user-images.githubusercontent.com/23289872/127987669-3842046b-2f08-46e4-9949-6bf0cdb45d95.png" alt="BlueJeans iOS Client Software Development Kit" title="BlueJeans iOS Client Software Development Kit"></a></p>
<h1 id='bluejeans-ios-client-software-development-kit' class='heading'>BlueJeans iOS Client Software Development Kit</h1>

<p>The BlueJeans iOS Client Software Development Kit (SDK) enables the embedding of BlueJeans Video and Audio capabilities into iOS apps. <code><a href="Classes/BlueJeansSDK.html">BlueJeansSDK</a></code> is a single namespace that encapsulates all the APIs related to establishing and managing a BlueJeans Video and Audio connection.</p>

<p>The design of the SDK emphasizes <strong>simplicity</strong>. Developers can quickly integrate BlueJeans video into their applications.</p>
<h2 id='features' class='heading'>Features</h2>

<ul>
<li>Audio and Video Permission handling</li>
<li>Join, End Meeting</li>
<li>Self Video</li>
<li>Remote Video, Remote Video states</li>
<li>Content receive</li>
<li>Audio and Video self mute</li>
<li>Orientation handling</li>
<li>Toggle front / back camera</li>
<li>Video Layout switch</li>
<li>Participant list</li>
<li>Participant properties: Audio mute state, Video mute state, is Self, Name and Unique Identifier</li>
<li>Self Participant</li>
<li>Screen Share</li>
<li>Log Upload</li>
<li>Multi-stream support (&ldquo;Sequin&rdquo; Video Layouts)</li>
<li>Public and Private meeting Chat</li>
<li>Remote Video and Content mute</li>
<li>Meeting Information (Title, Hostname, Meeting ID)</li>
</ul>
<h3 id='new-features-new-in-1-1-0-see-changelog-md-for-more-details' class='heading'>New Features (new in 1.1.0) See CHANGELOG.md for more details.</h3>

<ul>
<li>Closed Captioning Support</li>
<li>Waiting Room Participant Support</li>
<li>Waiting Room Moderation Support</li>
<li>Moderator Controls</li>
<li>Mute remote content and video streams</li>
<li>Xcode 13.0 Support</li>
</ul>
<h2 id='current-version-1-1-0' class='heading'>Current Version: 1.1.0</h2>
<h2 id='pre-requisites' class='heading'>Pre-requisites</h2>

<p>This framework requires <strong><em>Swift 5.4 or Swift 5.5</em></strong> and <strong><em>Xcode 12.5 or 13.0</em></strong>. Module stability will be provided in a future release.</p>

<p>Target deployment requires a minimum of <em>iOS version 13.0</em>.</p>

<p>All dependent frameworks are included as part of the <em>Frameworks</em> folder. Use the appropriate frameworks depending on your Xcode version. </p>
<h2 id='api-architecture' class='heading'>API Architecture</h2>

<p><img src="Images/ios-sdk-api-structure.png" alt="iOS Client SDK API Structure"></p>
<h2 id='sdk-documentation' class='heading'>SDK Documentation</h2>

<p>Detailed documentation of SDK functions is available <a href="https://bluejeans.github.io/ios-client-sdk/">here</a>.</p>
<h2 id='how-do-i-start' class='heading'>How do I start?</h2>

<p>You can experience BlueJeans meetings using the iOS client SDK by following the two steps below:</p>
<h3 id='generate-a-meeting-id' class='heading'>Generate a meeting ID</h3>

<p>As a prerequisite to using the BlueJeans iOS Client SDK to join meetings, you need a BlueJeans meeting ID. If you do not have a meeting ID then you can create one using a BlueJeans account:</p>

<ul>
<li>Sign up for a BlueJeans Account either by opting in for a <a href="https://www.bluejeans.com/free-video-conferencing-trial">trial</a> or a <a href="https://store.bluejeans.com/">paid account</a></li>
<li>Once the account is created, you can schedule a meeting either by using the account or through the <a href="https://bluejeans.github.io/api-rest-howto/schedule.html">direct API</a> calls. To enable API calls on your account, please reach out to <a href="https://support.bluejeans.com/s/contactsupport">support team</a>.</li>
<li>Some features (such as closed captioning) are not available in every meeting. Their availability depends on the account of the meeting owner, and the enterprise they belong to. The SDK provides methods to check if these features are available (e.g. <code>closedCaptioningService.isClosedCaptioningAvailable</code>). To enable a feature that is not available on your account, please contact your enterprise admin and get the feature enabled through the <a href="https://support.bluejeans.com/s/contactsupport">BlueJeans support team</a>.</li>
</ul>
<h3 id='integrate-bluejeans-ios-client-sdk' class='heading'>Integrate BlueJeans iOS Client SDK</h3>

<p>Integrate the SDK using the below guidelines and use SDK APIs to join a meeting using the generated meeting ID.</p>
<h2 id='integration-steps' class='heading'>Integration Steps</h2>

<p>Steps:</p>

<ol>
<li>Download the xcframeworks from here: <code>https://swdl.bluejeans.com/bjnvideosdk/ios/1.1.0/ios-client-sdk-xcode12.zip</code> or <code>https://swdl.bluejeans.com/bjnvideosdk/ios/1.1.0/ios-client-sdk-xcode13.zip</code> depending on whether you are using Xcode 12.5 or 13.0.</li>
<li>Unzip the file and copy the <code>Frameworks</code> folder to the root folder where the Xcode project(<em>xxxx.xcodeproj</em> file) is located.</li>
<li>Open the Xcode project, click on the project settings and select the <em>App target -&gt; General Tab</em>.</li>
<li>Scroll to <strong><em>Embedded Binaries</em></strong> section of Xcode target.</li>
<li>Select all frameworks found in <code>Frameworks</code></li>
<li>Drag and drop all frameworks present in the <code>Frameworks</code> folder to this section. Make sure the project settings look like the below image after adding it. Note that <code>BJNiOSBroadcastExtension.xcframework</code> is only needed if you intend to support screen sharing.</li>
</ol>

<p><img src="Images/xcodegeneralsettings.png" alt="Xcode Project Build Setting - General Tab"></p>
<h3 id='steps-for-simulator-support' class='heading'>Steps For Simulator Support</h3>

<p>If you follow the integration steps above you will notice that you can not run your app on the iOS Simulator. The SDK does support using the simulator for debugging but there are some extra steps to get it working.</p>

<p>The following frameworks are not built with support for the simulator.</p>

<ul>
<li>VZXRCVCommon.xcframework/ios-arm64/VZXRCVCommon.framework</li>
<li>VZXRCVFeatureVirtualBackgrounds.xcframework/ios-arm64/VZXRCVFeatureVirtualBackgrounds.framework</li>
<li>VZXRCVVideoEffects.xcframework/ios-arm64/VZXRCVVideoEffects.framework</li>
</ul>

<p>To work around this, follow these steps.</p>

<ol>
<li>Remove each of the above .xcframework&rsquo;s from the Frameworks, Libraries, and Embedded Content section.</li>
<li>Now the project will run on the simulator, but won&rsquo;t work on a real device.</li>
<li>To fix this we can add a <em>Run Script Phase</em> to the <em>Build Phases</em> for our Xcode project, which will run the included script. This script will copy and code-sign the framework only on real devices.</li>
</ol>

<p><img src="Images/embed-device-only.png" alt="Xcode Project Build Setting - General Tab"></p>
<h3 id='spm-carthage-and-cocoapods' class='heading'>SPM, Carthage and Cocoapods</h3>

<p>Other dependency managers, such as the Swift package manager, Carthage, or Cocoapods are not currently supported.</p>
<h3 id='upgrade-instructions' class='heading'>Upgrade Instructions</h3>

<p>Whenever a newer version of SDK is available, you can consume it by replacing the xcframeworks with the newer versions.</p>
<h2 id='setup' class='heading'>Setup</h2>
<h4 id='bitcode-support' class='heading'>Bitcode Support</h4>

<p>BlueJeans iOS Client SDK cannot support bitcode. To integrate this SDK into your application, you will have to disable bitcode for the project.</p>

<p>To disable bitcode:</p>

<ol>
<li>Go to the Build Settings tab of Xcode.</li>
<li>Search for <strong><em>&ldquo;Enable Bitcode&rdquo;</em></strong></li>
<li>Change the value to <strong><em>&ldquo;No&rdquo;</em></strong></li>
</ol>
<h4 id='user-permissions' class='heading'>User Permissions</h4>

<p>In iOS, the user must explicitly grant the app permission to access device cameras or microphones for video, or audio capture. Your app must provide an explanation for its use of these capture devices. Failure to do so will result in a crash.</p>

<p>Permissions can be requested using the <code><a href="Classes/BlueJeansSDK.html#/s:12BJNClientSDK09BlueJeansB0C17permissionServiceAA010PermissionF8Protocol_pvpZ">BlueJeansSDK.permissionService</a></code> or otherwise will be requested on joining a meeting. By default, the SDK requires both audio and video permissions to be granted or we can not join the meeting. The minimum permissions can also be changed in the <code>PermissionService</code>.</p>

<p>See also <a href="https://developer.apple.com/documentation/avfoundation/cameras_and_media_capture/requesting_authorization_for_media_capture_on_ios">Apple&rsquo;s developer documentation on audio and video capture permissions.</a></p>

<p>Open your application&rsquo;s <code>Info.plist</code> and provide a short explanation for both of these <code>Info.plist</code> keys:</p>

<ul>
<li><strong><em>NSCameraUsageDescription</em></strong> <em>(Privacy - Camera Usage Description)</em></li>
<li><strong><em>NSMicrophoneUsageDescription</em></strong> <em>(Privacy - Microphone Usage Description)</em></li>
</ul>

<p>iOS displays this prompt when asking the user for permission, and thereafter in the Settings app. See <a href="https://developer.apple.com/documentation/avfoundation/cameras_and_media_capture">Apple documentation</a> for more details.</p>

<p><img src="Images/plist.png" alt="Info.plist updates"></p>
<h2 id='initialize-the-bluejeans-sdk' class='heading'>Initialize the BlueJeans SDK</h2>

<p>The work needed to add the BlueJeans functionality into your application code is outlined here. Briefly, you will do these steps:</p>

<ul>
<li>Include the BlueJeans <code>BJNClientSDK</code> module, and initialize the SDK by calling the <code>BlueJeansSDK.initalize</code> method.</li>
<li>Create a video view for the <em>Self-view</em>, add and position the remote video view controller, and if desired <em>Content Share view</em>.</li>
<li>Make the API call to Join the BlueJeans Meeting.</li>
<li>When finished, make the API call to Leave the BlueJeans Meeting.</li>
</ul>

<p><em>There!</em> That is the extent of the work you need to do to make your application join a BlueJeans meeting.</p>
<h3 id='include-module' class='heading'>Include Module</h3>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">BJNClientSDK</span>
</code></pre>
<h3 id='setup' class='heading'>Setup</h3>

<p>As seen in the architecture diagram above, the BlueJeans iOS Client SDK is made up of &ldquo;Services&rdquo;. These objects provide a static interface to the state of the SDK as well as methods to operate on it.</p>

<p>You can retain references to these objects for your convenience. We&rsquo;ll start with the MeetingService and VideoDeviceService, which will let us join/leave a meeting and get at the video streams in it.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">meetingService</span> <span class="o">=</span> <span class="kt">BlueJeansSDK</span><span class="o">.</span><span class="n">meetingService</span>
<span class="k">let</span> <span class="nv">videoDeviceService</span> <span class="o">=</span> <span class="kt">BlueJeansSDK</span><span class="o">.</span><span class="n">videoDeviceService</span>
</code></pre>
<h2 id='join-a-bluejeans-meeting' class='heading'>Join a BlueJeans meeting</h2>

<p>To connect to a Video/Audio meeting,</p>
<pre class="highlight swift"><code><span class="n">meetingService</span><span class="o">.</span><span class="nf">join</span><span class="p">(</span><span class="nv">meetingID</span><span class="p">:</span> <span class="s">"your-meeting-id"</span><span class="p">,</span> <span class="nv">passcode</span><span class="p">:</span> <span class="s">"your-passcode"</span><span class="p">,</span> <span class="nv">displayName</span><span class="p">:</span> <span class="s">"John Doe"</span><span class="p">)</span> <span class="p">{</span> <span class="n">joinResult</span> <span class="k">in</span>
 <span class="k">if</span> <span class="n">joinResult</span> <span class="o">==</span> <span class="o">.</span><span class="n">success</span> <span class="p">{</span>
 <span class="nf">print</span><span class="p">(</span><span class="s">"Join meeting: Success"</span><span class="p">)</span>
 <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
 <span class="nf">print</span><span class="p">(</span><span class="s">"Join meeting failed with result </span><span class="se">\(</span><span class="n">joinResult</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
 <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h2 id='leave-a-meeting' class='heading'>Leave a meeting</h2>

<p>To disconnect from the meeting,</p>
<pre class="highlight swift"><code><span class="n">meetingService</span><span class="o">.</span><span class="nf">leave</span><span class="p">()</span>
</code></pre>
<h2 id='adding-video' class='heading'>Adding video</h2>
<h3 id='adding-remote-video' class='heading'>Adding Remote video</h3>

<p>BlueJeansSDK uses a system that receives multiple streams of video and audio and the client joins these together to create different layouts. This complexity is handled by the Remote Video Controller. To use this view controller, instantiate it with the code:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">remoteVideoViewController</span> <span class="o">=</span> <span class="n">videoDeviceService</span><span class="o">.</span><span class="nf">getRemoteVideoController</span><span class="p">()</span>
</code></pre>

<p>and add it to your view using view controller containment. For example:</p>
<pre class="highlight swift"><code><span class="nf">addChild</span><span class="p">(</span><span class="n">remoteVideoViewController</span><span class="p">)</span>
<span class="n">view</span><span class="o">.</span><span class="nf">addSubview</span><span class="p">(</span><span class="n">remoteVideoViewController</span><span class="o">.</span><span class="n">view</span><span class="p">)</span>
<span class="n">view</span><span class="o">.</span><span class="nf">sendSubviewToBack</span><span class="p">(</span><span class="n">remoteVideoViewController</span><span class="o">.</span><span class="n">view</span><span class="p">)</span>
<span class="n">remoteVideoViewController</span><span class="o">.</span><span class="nf">didMove</span><span class="p">(</span><span class="nv">toParent</span><span class="p">:</span> <span class="k">self</span><span class="p">)</span>

<span class="c1">// Add auto-layout constraints here if desired. </span>
</code></pre>
<h3 id='adding-self-and-content-share-views' class='heading'>Adding Self and Content Share views</h3>

<p>The Self and Content Share views can be added as follows:</p>

<ol>
<li>Create a container view (e.g. <code>videoContainer</code>) in Storyboard, XIB, or code.</li>
<li>Setup AutoLayout constraints for the <code>videoContainer</code> view.</li>
<li>Add the self or content share view as described below.</li>
</ol>
<pre class="highlight swift"><code><span class="c1">// Select the camera to use for the self view</span>
<span class="n">videoDeviceService</span><span class="o">.</span><span class="nf">selectCameraDevice</span><span class="p">(</span><span class="o">.</span><span class="n">front</span><span class="p">)</span>

<span class="k">guard</span> <span class="k">let</span> <span class="nv">videoView</span> <span class="o">=</span> <span class="n">videoDeviceService</span><span class="o">.</span><span class="nf">getSelfViewInstance</span><span class="p">()</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>
<span class="n">videoContainer</span><span class="o">.</span><span class="nf">addSubview</span><span class="p">(</span><span class="n">videoView</span><span class="p">)</span>
<span class="c1">//Set constraints programatically for top, bottom, left and right anchors</span>
<span class="n">videoView</span><span class="o">.</span><span class="n">translatesAutoresizingMaskIntoConstraints</span> <span class="o">=</span> <span class="kc">false</span>
<span class="n">videoView</span><span class="o">.</span><span class="n">leftAnchor</span><span class="o">.</span><span class="nf">constraint</span><span class="p">(</span><span class="nv">equalTo</span><span class="p">:</span> <span class="n">videoContainer</span><span class="o">.</span><span class="n">leftAnchor</span><span class="p">)</span><span class="o">.</span><span class="n">isActive</span> <span class="o">=</span> <span class="kc">true</span>
<span class="n">videoView</span><span class="o">.</span><span class="n">rightAnchor</span><span class="o">.</span><span class="nf">constraint</span><span class="p">(</span><span class="nv">equalTo</span><span class="p">:</span> <span class="n">videoContainer</span><span class="o">.</span><span class="n">rightAnchor</span><span class="p">)</span><span class="o">.</span><span class="n">isActive</span> <span class="o">=</span> <span class="kc">true</span>
<span class="n">videoView</span><span class="o">.</span><span class="n">topAnchor</span><span class="o">.</span><span class="nf">constraint</span><span class="p">(</span><span class="nv">equalTo</span><span class="p">:</span> <span class="n">videoContainer</span><span class="o">.</span><span class="n">topAnchor</span><span class="p">)</span><span class="o">.</span><span class="n">isActive</span> <span class="o">=</span> <span class="kc">true</span>
<span class="n">videoView</span><span class="o">.</span><span class="n">bottomAnchor</span><span class="o">.</span><span class="nf">constraint</span><span class="p">(</span><span class="nv">equalTo</span><span class="p">:</span> <span class="n">videoContainer</span><span class="o">.</span><span class="n">bottomAnchor</span><span class="p">)</span><span class="o">.</span><span class="n">isActive</span> <span class="o">=</span> <span class="kc">true</span>
</code></pre>

<p>Similar code can be used with <code>getContentShareInstance</code> in place of <code>getSelfViewVideoInstance</code> to add it to your view hierarchy. Note that, as with the RemoteVideoViewController, the SDK does not retain a reference to these views.</p>
<h3 id='self-video-view-rotation' class='heading'>Self Video View Rotation</h3>

<p>Note that the size/aspect ratio of the self-view will change as the device is rotated. Currently, this is between 3:4 (portrait) and 4:3 (landscape) but is likely to also include 9:16 and 16:9 in future releases.</p>

<p>To handle these changes (and many other properties), the SDK provides <em>observable properties</em> that allow you to react whenever they change. In this case, you need to observe the <em>VideoDeviceService.selfViewSize</em> property as follows:</p>

<p><strong>Swift:</strong></p>
<pre class="highlight swift"><code><span class="n">videoDeviceService</span><span class="o">.</span><span class="n">selfViewSize</span><span class="o">.</span><span class="n">onChange</span> <span class="p">{</span>
  <span class="nf">print</span><span class="p">(</span><span class="s">"Self view size changed to "</span><span class="p">,</span> <span class="n">videoDeviceService</span><span class="o">.</span><span class="n">selfViewSize</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
  <span class="c1">// Update self view container size</span>
<span class="p">}</span>
</code></pre>
<h3 id='content-share-size' class='heading'>Content Share Size</h3>

<p>Content Share (Screen Share) from another device can come in many different sizes and aspect ratios. You should observe the <code>contentShareSize</code> property and recreate your aspect ratio constraints for the container view that holds the ContentShare instance.</p>
<h3 id='logging' class='heading'>Logging</h3>

<p>The iOS Client SDK will record logs. If you have experienced an issue you can upload these logs, with a comment and email for us to diagnose the issue.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">loggingService</span> <span class="o">=</span> <span class="kt">BlueJeansSDK</span><span class="o">.</span><span class="n">loggingService</span> <span class="c1">// This will instantiate the logger, do this early in the lifecycle of your application.</span>

<span class="n">loggingService</span><span class="o">.</span><span class="nf">uploadLogs</span><span class="p">(</span><span class="nv">comments</span><span class="p">:</span> <span class="s">"Issue with the SDK"</span><span class="p">,</span> <span class="nv">username</span><span class="p">:</span> <span class="s">"abc@yourcompany.com"</span><span class="p">)</span> <span class="p">{</span> <span class="n">uploadResult</span> <span class="k">in</span>
  <span class="nf">print</span><span class="p">(</span><span class="s">"Log Upload Finished"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>

<p><code><a href="Classes/BlueJeansSDK.html">BlueJeansSDK</a></code> uses <code>CocoaLumberjack</code> and will respect log levels set at the app level.</p>
<h1 id='exploring-the-sdk' class='heading'>Exploring the SDK</h1>

<p>The SDK is made up of several services. These fall into two main categories, in-meeting, and out-of-meeting. While they can be accessed at any time, in-meeting services will return nil or default values when a meeting is not active. In-meeting services are all accessed from the MeetingService.</p>

<p>Here we will cover each service at a high level, for more detail check the detailed docs <a href="https://bluejeans.github.io/ios-client-sdk">here</a>.</p>
<h2 id='meetingservice' class='heading'>MeetingService</h2>

<p>This service takes care of all meeting-related APIs. It also provides access to the in-meeting services - ContentShareService, PublicChatService, and PrivateChatService.</p>

<p>The meeting service provides methods to join and leave meetings, change video layout, mute local audio/video. Observable properties include meeting state, video layout, local mute, a list of active participants, and recording status.</p>
<h3 id='video-layouts' class='heading'>Video Layouts</h3>

<p>Represents how remote participants videos are composed:</p>

<ul>
<li><strong>Speaker</strong> : Only the most recent speaker is shown, taking up the whole video stream.</li>
<li><strong>People</strong> : The most recent speaker is shown as a larger video. A filmstrip of the next (up to) 5 most recent speakers is also seen.</li>
<li><strong>Gallery</strong> : A collection of the most recent speakers is shown, arranged in a grid layout of equal sizes.</li>
</ul>

<p><em>videoLayout</em> reflects the current video layout, while <em>setVideoLayout(to layout: VideoLayout)</em> can be used to set a layout of your choice.</p>

<p>Note that by default layout will be set by the meeting scheduler in their account&rsquo;s meeting settings.</p>
<h4 id='configuring-5x5-in-gallery-layout' class='heading'>Configuring 5x5 in gallery layout</h4>

<p><code><a href="Classes/BlueJeansSDK.html#/s:12BJNClientSDK09BlueJeansB0C10initialize22contentShareParameters25is5x5GalleryLayoutEnabledy10BJNiOSCore09BJNScreengH8Protocol_p_SbSgtFZ">BlueJeansSDK.initialize(...)</a></code> provides a parameter to turn on 5x5 gallery layouts - the default will be 3x3. 5x5 works well on most iOS devices that support iOS 13 or higher, but developers may want to consider limiting 5x5 on older devices if needed.</p>
<h2 id='audiodeviceservice' class='heading'>AudioDeviceService</h2>

<p>Provides a method to get a UIView for selecting an audio device. Currently, this will return a standard iOS audio picker. BlueJeans will respect all normal changes in input/output audio devices - for example, plugging in headphones or connecting to a Bluetooth device.</p>
<h2 id='videodeviceservice' class='heading'>VideoDeviceService</h2>

<p>The VideoDeviceService provides views for the self-view, remote endpoints, and any content that is being received currently. It also exposes methods/properties related to these, for example selecting a camera or the current size of received self or content share video.</p>
<h2 id='contentshareservice' class='heading'>ContentShareService</h2>

<p>Screen sharing on iOS involves creating an app extension that can capture the entire screen - even when your app is in the background. This is covered in detail in <a href="./ContentShareGuide.md">here</a>.</p>

<p>The ContentShareService provides methods for starting and stopping screen sharing as well as observable properties to know if screen sharing is available (for example it may be restricted in the meeting settings), and the current status of screen sharing.</p>
<h2 id='publicchatservice-and-privatechatservice' class='heading'>PublicChatService and PrivateChatService</h2>

<p>The SDK provides a facility to chat within the meeting with participants present in the meeting. The chat will remain for the duration of the meeting and will be cleared once the meeting is over.</p>

<p>As the names suggest, the Public and Private chat services provide access to send and receive messages either directly to an individual or to share with all participants in the meeting.</p>
<h2 id='loggingservice' class='heading'>LoggingService</h2>

<p>This has already been briefly covered above. The desired logging level can be set and logs can be uploaded to BlueJeans.</p>
<h2 id='permissionservice' class='heading'>PermissionService</h2>

<p>By default, the SDK will ask for microphone/camera permission at the last possible moment - when joining a meeting for the first time. It will use the strings specified in your app&rsquo;s Info.plist when requesting permission (see above).</p>

<p>The PermissionService provides methods and states to allow more fine-grained control over how and when permission is asked for.</p>
<h2 id='moderatorcontrolsservice' class='heading'>ModeratorControlsService</h2>

<p>When you join a BlueJeans meeting with a moderator passcode, various extra controls are available. For example, to mute the other participants in the meeting, or to start or stop recording. </p>

<p>The ModeratorControlsService provides the ability to check if an SDK user has joined with moderator privileges, and functions to perform moderator-specific actions. </p>
<h2 id='moderatorwaitingroomservice' class='heading'>ModeratorWaitingRoomService</h2>

<p>BlueJeans meetings can optionally include the &ldquo;Waiting Room&rdquo; feature, which allows users who join with a participant passcode to first be placed into a waiting room state, from here a moderator can individually admit them into the meeting - after which they will join automatically. </p>

<p>The ModeratorWaitingRoomService provides functions and properties to see who has joined the waiting room, admit or deny those in the waiting room, or demote someone from the meeting back into the waiting room. It also provides functions to toggle the waiting room function on or off in a meeting and check if the meeting supports the &lsquo;Waiting Room&rsquo; feature. </p>
<h2 id='closedcaptioningservice' class='heading'>ClosedCaptioningService</h2>

<p>The BlueJeans meeting platform supports automatically generated closed captioning for meetings. </p>

<p>The ClosedCaptioningService provides functions and properties to check if automatic captions are available for the current meeting, to start and stop the captions on the client, and the captions themselves. </p>
<h2 id='sdk-sample-applications' class='heading'>SDK Sample Applications</h2>

<p>We have bundled two sample apps in this repo.</p>

<ol>
<li><em>Hello BlueJeans</em> provides a bare-bones example to get you into a meeting and sending/receiving audio and video.</li>
<li><em>Screen Share</em>, as the name suggests, guides you through the process of setting up your app and an app extension to enable screen sharing.</li>
</ol>
<h2 id='important-notes' class='heading'>Important Notes</h2>
<h3 id='background-modes' class='heading'>Background Modes</h3>

<p>If you need to support Audio after the app moves to the background, you need to enable <strong><em>Background Modes</em></strong> -&gt; <strong><em>Audio</em></strong> capability.</p>

<ol>
<li>Open Xcode project settings</li>
<li>Go to Capabilities tab(next to General tab)</li>
<li>Scroll down to <strong><em>Background Modes</em></strong> section.</li>
<li>Toggle the switch to <strong><em>ON</em></strong> position for <em>Background Modes</em>.</li>
<li>Select checkbox with title <strong><em>Audio, AirPlay, and Picture in Picture</em></strong>.</li>
</ol>

<p><img src="Images/backgroundmodes.png" alt="Selecting Audio in Background Modes"></p>

<p><strong><em>Note: Without this, if you join a meeting -&gt; background the app -&gt; foreground it after some time, the audio will be lost and it will show an error in console as</em></strong> <code>&quot;Audio, Airplay and Picture in Picture&quot; background mode missing from app capabilities.</code></p>
<h3 id='video-support-in-background' class='heading'>Video support in Background</h3>

<p>Note that the iOS Client SDK <strong>does not support Video</strong> in Background mode. An app needs to be in the foreground to use the Video capability. Once the app is backgrounded, video streaming will be paused until the user foregrounds the app.</p>
<h3 id='ios-simulators' class='heading'>iOS Simulators</h3>

<p>Video/Audio capability of <code><a href="Classes/BlueJeansSDK.html">BlueJeansSDK</a></code> would only work in an iOS Device since iOS Simulator cannot support Camera/Microphone. Hence you may not be able to use iOS Simulators for integrating and testing all SDK features. Features that do not rely on audio/video should work but are not officially supported. </p>
<h3 id='video-resolutions-and-bw-consumption' class='heading'>Video Resolutions and BW consumption</h3>

<ul>
<li>Video receive resolution and BW max:</li>
</ul>

<table><thead>
<tr>
<th>Layout</th>
<th style="text-align: center">Max participants</th>
<th style="text-align: center">Layout pattern for max participants</th>
<th style="text-align: center">Video Receive max resolution, FPS</th>
<th style="text-align: center">Video Receive BW max</th>
</tr>
</thead><tbody>
<tr>
<td>Speaker View</td>
<td style="text-align: center">1</td>
<td style="text-align: center">1</td>
<td style="text-align: center">640x360/640x480  30fps</td>
<td style="text-align: center">600 kbps</td>
</tr>
<tr>
<td>People View</td>
<td style="text-align: center">6</td>
<td style="text-align: center">1 (main stage) + 5 (film strip)</td>
<td style="text-align: center">main stage 640x360/640x480 30fps (if single participant)</td>
<td style="text-align: center">600 kbps</td>
</tr>
<tr>
<td></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center">main stage 320x180/240x180 30fps (if &gt; 1 participant)</td>
<td style="text-align: center">300 kbps</td>
</tr>
<tr>
<td></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center">film strip 160x90/120x90, 15fps</td>
<td style="text-align: center">400 kbps</td>
</tr>
<tr>
<td>Gallery View</td>
<td style="text-align: center">9</td>
<td style="text-align: center">3x3 (landscape) / 4x2+1 (portrait)</td>
<td style="text-align: center">640x360/640x480 (participants &lt; 2)      30 fps</td>
<td style="text-align: center">1200 kbps</td>
</tr>
<tr>
<td></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center">320x180/240x180 (participants &gt; 2, &lt; 4) 30 fps</td>
<td style="text-align: center">1200 kbps</td>
</tr>
<tr>
<td></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center">160x90/120x90  (participants &gt; 4)       15 fps</td>
<td style="text-align: center">900 kbps</td>
</tr>
<tr>
<td></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center">160x90/120x90  (participants &gt; 9)       15 fps</td>
<td style="text-align: center">1700 kbps</td>
</tr>
</tbody></table>

<ul>
<li>Content receive resolution and BW max: 1920x1080 at 5 fps, 300 kbps</li>
<li>Video send resolution and BW max: 640x480 at 30fps, 900 kbps</li>
</ul>

<p>Note: Endpoints that send video in an aspect ratio of 4:3 instead of 16:9, will result in the video received at a resolution of 640x480 in place of 640x360, 240x180 in place of 320x180, and 120x90 in place of 160x90. Mobile endpoints / BlueJeans iOS SDK endpoints send video at 640x480 i.e at an aspect ratio of 4:3.</p>
<h2 id='tracking-amp-analytics' class='heading'>Tracking &amp; Analytics</h2>

<p>BlueJeans collects data from app clients who integrate with SDK to join BlueJeans meetings like device information (ID, OS, etc.), coarse location (based on IP address), and usage data.</p>
<h2 id='contributing' class='heading'>Contributing</h2>

<p>The BlueJeans iOS Client SDK is closed source and proprietary. As a result, we cannot accept pull requests. However, we enthusiastically welcome feedback on how to make our SDK better. If you think you have found a bug, or have an improvement or feature request, please file a GitHub issue and we will get back to you. Thanks in advance for your help!</p>
<h2 id='license' class='heading'>License</h2>

<p>Copyright © 2021 BlueJeans Network. All usage of the SDK is subject to the Developer Agreement that can be found <a href="LICENSE">here</a>.
Download the agreement and send an email to <a href="mailto:api-sdk@bluejeans.com">api-sdk@bluejeans.com</a> with a signed version of this agreement. Before any commercial or public facing usage of this SDK.</p>
<h2 id='legal-requirements' class='heading'>Legal Requirements</h2>

<p>Use of this SDK is subject to our <a href="https://www.bluejeans.com/terms-and-conditions-may-2020">Terms &amp; Conditions</a> and <a href="https://www.bluejeans.com/privacy-policy">Privacy Policy</a>.</p>

          </div>
        </section>


      </article>
    </div>
    <section class="footer">
      <p>© 2021 Copyright BlueJeans Network. All Rights Reserved.</p>
    </section>
  </body>
</div>
</html>
